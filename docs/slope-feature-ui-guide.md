# 경사도 분석 UI 가이드

## 📱 화면 표시 방식

### 1. 경로 검색 전
```
┌─────────────────────────────────┐
│  출발지: [현재 위치 버튼] [입력] │
│  🔄                              │
│  도착지: [입력]                  │
│  [🔍 경로 검색]                 │
│                                  │
│  📍 출발지와 도착지를 입력하세요 │
└─────────────────────────────────┘
```

### 2. 경로 검색 후 (경사도 정보 포함)
```
┌─────────────────────────────────────────┐
│  🚇 추천 경로                           │
│                                          │
│  ┌────────────────────────────────────┐ │
│  │  ⏱️ 50분    🚶 25분    👤 27분   │ │
│  │  총 시간    도보 시간   나의 속도   │ │
│  └────────────────────────────────────┘ │
│                                          │
│  🏔️ 경사도 분석                        │
│  ┌────────────────────────────────────┐ │
│  │  평균 경사   보정 시간   실제 예상  │ │
│  │   4.2%     +2분 13초    27분      │ │
│  └────────────────────────────────────┘ │
│                                          │
│  ⚪ 출발지 → 충무로역8번출구              │
│     888m · 평지 (2.1%) (+30초)         │
│                                          │
│  🟡 충무로역 → 충무로                    │
│     218m · 보통 (6.5%) (+1분)          │
│                                          │
│  🟠 쌍문 → 도착지                        │
│     667m · 가파름 (12.3%) (+43초)      │
│                                          │
│  📍 도보 구간 (3개)                     │
│  [각 구간의 상세 정보...]               │
└─────────────────────────────────────────┘
```

## 🎨 디자인 상세

### 경사도 분석 카드
- **배경색**: 연한 오렌지 (#FFF9F0)
- **테두리**: 오렌지 (#FFE5CC)
- **제목 아이콘**: 🏔️ terrain (빨강 #FF6B6B)

### 요약 통계 (3개 박스)
```
┌─────────┬─────────┬─────────┐
│평균 경사 │보정 시간 │실제 예상 │
│  4.2%   │+2분13초 │  27분   │
└─────────┴─────────┴─────────┘
```

### 구간별 상세 정보
각 보행 구간마다:
```
[이모지] 출발지 → 도착지
        거리 · 난이도 (경사도%) (시간차이)
```

**이모지 색상 코드:**
- ⚪ 평지 (0-3%): 흰색
- 🟢 완만 (3-5%): 초록색
- 🟡 보통 (5-10%): 노란색
- 🟠 가파름 (10-15%): 주황색
- 🔴 매우 가파름 (15%+): 빨간색

**시간 차이 색상:**
- 빨강 (#FF6B6B): 시간 증가 (+1분, +30초)
- 초록 (#4CAF50): 시간 감소 (-30초) - 내리막

## 📊 실제 데이터 예시

### 예시 1: 평지 위주 경로
```
🏔️ 경사도 분석
평균 경사: 1.5%
보정 시간: +12초
실제 예상: 25분

⚪ A → B: 500m · 평지 (0.8%) (+5초)
⚪ B → C: 350m · 평지 (1.2%) (+7초)
```

### 예시 2: 오르막 많은 경로
```
🏔️ 경사도 분석
평균 경사: 8.3%
보정 시간: +5분 30초
실제 예상: 35분

🟡 A → B: 400m · 보통 (6.2%) (+1분)
🟠 B → C: 600m · 가파름 (12.5%) (+3분)
🟢 C → D: 300m · 완만 (4.1%) (+45초)
```

### 예시 3: 내리막 포함
```
🏔️ 경사도 분석
평균 경사: 3.2%
보정 시간: -15초
실제 예상: 19분

⚪ A → B: 400m · 평지 (1.5%) (+10초)
🟢 B → C: 500m · 완만 (-4.2%) (-25초) ← 내리막
```

## 🔄 동작 흐름

```
1. 사용자가 출발지/도착지 입력
   ↓
2. [경로 검색] 버튼 클릭
   ↓
3. 로딩 표시 (ActivityIndicator)
   ↓
4. Backend API 호출
   - Tmap 경로 검색
   - 경사도 분석 (자동)
   ↓
5. 결과 표시
   - 기본 경로 정보
   - 경사도 분석 카드 (조건부 표시)
   ↓
6. 스크롤하여 상세 정보 확인
```

## ⚠️ 주의사항

### 경사도 정보가 표시되지 않는 경우
1. **보행 구간이 없는 경우**: 지하철/버스만 타는 경로
2. **API 오류**: Google Elevation API 키 문제
3. **네트워크 오류**: 백엔드 연결 실패

이런 경우에도 **기본 경로 정보는 정상 표시**됩니다.

### 조건부 렌더링
```typescript
{routeInfo.slopeAnalysis && !routeInfo.slopeAnalysis.error && (
  <View style={styles.slopeInfoCard}>
    {/* 경사도 정보 */}
  </View>
)}
```

## 🎯 사용자 피드백

### 긍정적 피드백
- "오르막이 많은 걸 미리 알 수 있어서 좋아요"
- "시간이 더 정확해졌어요"
- "빨리 가고 싶으면 평지 경로를 선택할 수 있어요"

### 개선 제안
- 경사도 그래프 추가
- 경로 비교 기능
- 개인화된 속도 반영

## 📸 스크린샷 (예상)

```
┌─────────────────────────────────┐
│ PaceTry                         │
│                                  │
│ [출발] 동국대입구역              │
│  🔄                              │
│ [도착] 쌍문역                    │
│                                  │
│ [🔍 경로 검색]  ← 클릭           │
└─────────────────────────────────┘
        ↓
┌─────────────────────────────────┐
│ 🚇 추천 경로                    │
│ ⏱️ 50분 🚶 25분 👤 27분        │
│                                  │
│ 🏔️ 경사도 분석                 │
│ ┌─────────────────────────────┐ │
│ │ 4.2%  +2분13초  27분       │ │
│ └─────────────────────────────┘ │
│                                  │
│ ⚪ 출발지 → 충무로역             │
│    888m · 평지 (+30초)         │
│ 🟡 충무로 → 충무로역             │
│    218m · 보통 (+1분)          │
│ 🟠 쌍문 → 도착지                 │
│    667m · 가파름 (+43초)       │
└─────────────────────────────────┘
```

## 🚀 테스트 방법

1. 앱 실행
2. 출발지 입력 (예: "동국대입구역")
3. 도착지 입력 (예: "쌍문역")
4. "경로 검색" 버튼 클릭
5. 결과 확인:
   - 기본 정보 표시됨
   - 경사도 분석 카드 표시됨 ✅
   - 구간별 상세 정보 표시됨 ✅

## 📝 개발자 노트

### 데이터 흐름
```
Frontend (index.tsx)
  ↓ searchRoute()
Backend (Tmap API)
  ↓ transit-route
Backend (elevation API)
  ↓ analyze-slope
Frontend (routeInfo.slopeAnalysis)
  ↓ UI 렌더링
화면 표시 ✨
```

### 성능 최적화
- 좌표 샘플링으로 API 호출 최소화
- 조건부 렌더링으로 불필요한 UI 방지
- 에러 발생 시에도 기본 정보는 표시

---

**구현 완료 날짜**: 2025년 10월 24일  
**버전**: 1.0.0  
**개발자**: PaceTry Team
